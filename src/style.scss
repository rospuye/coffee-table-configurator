@use "sass:color";

* {
    margin: 0;
    padding: 0;
}

html,
body {
    overflow: hidden;
}

.webgl {
    position: fixed;
    top: 0;
    left: 0;
    outline: none;
}

* {
    margin: 0px;
    padding: 0px;
    border: 0px;
    box-sizing: border-box;
}

html {
    width: 100%;
    height: 100%;
}

$navbar-beige-secondary: color.adjust(#ede9e8, $lightness: -30%);
$navbar-grey-secondary: color.adjust(#333, $lightness: 40%);

:root {
    --background: #966548;
    --navbar-width: 256px;
    --navbar-width-min: 80px;
    --navbar-beige-primary: #ede9e8;
    --navbar-beige-secondary: #{$navbar-beige-secondary};
    --navbar-grey-primary: #333;
    --navbar-grey-secondary: #{$navbar-grey-secondary};
    --navbar-accent: #ffe9a0;
}

html,
body {
    margin: 0;
    background: var(--background);
}

#nav-toggle:checked {
    &~#nav-header {
        width: calc(var(--navbar-width-min) - 16px);

        #nav-title {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.1s;
        }

        label[for="nav-toggle"] {
            left: calc(50% - 8px);
            transform: translate(-50%);
        }

        #nav-toggle-burger {
            background: var(--navbar-grey-primary);

            &:before,
            &::after {
                width: 16px;
                background: var(--navbar-grey-secondary);
                transform: translate(0, 0) rotate(0deg);
            }
        }
    }

    &~#nav-content,
    &~#nav-footer {
        width: var(--navbar-width-min);
    }

    &~#nav-content {
        .nav-button {
            span {
                opacity: 0;
                transition: opacity 0.1s;
            }

            .fas {
                min-width: calc(100% - 16px);
            }
        }
    }

    &~#nav-footer {
        #nav-footer-avatar {
            margin-left: 0;
            left: 50%;
            transform: translate(-50%);
        }

        #nav-footer-titlebox,
        label[for="nav-footer-toggle"] {
            opacity: 0;
            transition: opacity 0.1s;
            pointer-events: none;
        }
    }
}

#nav-bar {
    position: absolute;
    left: 2vw;
    top: 2vw;
    height: auto;
    padding-bottom: 5px;
    background: var(--navbar-beige-primary);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    color: var(--navbar-grey-primary);
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    overflow: hidden;
    user-select: none;
    box-shadow: 0 0 16px rgba(0, 0, 0, 0.2);

    hr {
        margin: 0;
        position: relative;
        left: 16px;
        width: calc(100% - 32px);
        border: none;
        border-top: solid 1px var(--navbar-beige-secondary);
    }

    a {
        color: inherit;
        text-decoration: inherit;
    }

    input[type="checkbox"] {
        display: none;
    }

    .fas {
        min-width: 3rem;
        text-align: center;
    }
}

#nav-header {
    position: relative;
    width: calc(var(--navbar-width) - 16px);
    left: 16px;
    min-height: 80px;
    background: var(--navbar-beige-primary);
    border-radius: 16px;
    z-index: 2;
    display: flex;
    align-items: center;
    transition: width 0.2s;

    hr {
        position: absolute;
        bottom: 0;
    }
}

#nav-title {
    font-size: 1.5rem;
    transition: opacity 1s;
}

label[for="nav-toggle"] {
    position: absolute;
    right: 0;
    width: 3rem;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

#nav-toggle-burger {
    position: relative;
    width: 16px;
    height: 2px;
    background: var(--navbar-beige-primary);
    border-radius: 99px;
    transition: background 0.2s;

    &:before,
    &:after {
        content: "";
        position: absolute;
        top: -6px;
        width: 10px;
        height: 2px;
        background: var(--navbar-grey-primary);
        border-radius: 99px;
        transform: translate(2px, 8px) rotate(30deg);
        transition: 0.2s;
    }

    &:after {
        top: 6px;
        transform: translate(2px, -8px) rotate(-30deg);
    }
}

#nav-content {
    margin: -16px 0;
    padding: 16px 0;
    position: relative;
    flex: 1;
    width: var(--navbar-width);
    background: var(--navbar-beige-primary);
    box-shadow: 0 0 0 16px var(--navbar-beige-primary);
    direction: rtl;
    // overflow-x: visible;
    // overflow-y: auto;
    overflow: hidden;
    transition: width 0.2s;

    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    &::-webkit-scrollbar-thumb {
        border-radius: 99px;
        background-color: #333;
    }

    &::-webkit-scrollbar-button {
        height: 16px;
    }

}

#nav-content-highlight {
    position: absolute;
    left: 16px;
    top: -54 - 16px;
    width: calc(100% - 16px);
    height: 54px;
    background: var(--background);
    background-attachment: fixed;
    border-radius: 16px 0 0 16px;
    transition: top 0.2s;

    &:before,
    &:after {
        content: "";
        position: absolute;
        right: 0;
        bottom: 100%;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        box-shadow: 16px 16px var(--background);
    }

    &:after {
        top: 100%;
        box-shadow: 16px -16px var(--background);
    }
}

.nav-button {
    position: relative;
    margin-left: 16px;
    height: 54px;
    display: flex;
    align-items: center;
    color: var(--navbar-grey-primary);
    direction: ltr;
    cursor: pointer;
    z-index: 1;
    transition: color 0.2s;

    span {
        transition: opacity 1s;
    }

    .fas {
        transition: min-width 0.2s;
    }

    .nav-option-subtext {
        font-weight: bold;
        font-size: 14px;
        color: var(--navbar-grey-secondary);
        display: inline-block;
        transition: opacity 0.15s ease;
    }

    &:hover {
        color: var(--navbar-beige-primary);

        .nav-option-subtext {
            color: var(--navbar-accent);
        }
    }

    @for $i from 1 through 3 {
        &:nth-of-type(#{$i}):hover {
            &~#nav-content-highlight {
                top: ($i - 1) * 54 + 16px;
            }
        }
    }
}

.nav-text {
    display: flex;
    flex-direction: column;
}

#top-material-button,
#base-material-button,
#top-shape-button {
    position: relative;

    &:hover .nav-dots {
        opacity: 1;
    }

    .nav-dots {
        display: flex;
        flex-direction: column;
        gap: 6px;
        align-items: center;
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: auto;

        opacity: 0;
        transition: opacity 0.2s;

    }

    .nav-dot {
        width: 5px;
        height: 5px;
        min-width: 5px;
        border-radius: 50%;
        border: none;
        background: rgba(51, 51, 51, 0.12);
        transition: transform .18s ease, background-color .22s ease, box-shadow .18s ease;
        cursor: pointer;
        padding: 0;
        outline: none;

        &:focus {
            transform: scale(1.18);
            box-shadow: 0 0 0 4px rgba(51, 51, 51, 0.25);
        }

        &.active {
            transform: scale(1.28);
            box-shadow: 0 6px 12px rgba(51, 51, 51, 0.25);
        }
    }
}